
# Airflow Studio - JupyterLab Extension

A modern, offline-capable JupyterLab extension to scaffold, visualize, and deploy Airflow DAGs directly from your cluster workspace.

![Airflow Studio](https://img.shields.io/badge/JupyterLab-Extension-orange?logo=jupyter)
![Security](https://img.shields.io/badge/Security-Offline_Compliant-green)

## Project Structure

This project follows a hybrid architecture with a React frontend and a Python backend.

*   **`src/`**: Contains the Frontend source code (React + TypeScript).
    *   `components/`: Reusable UI components (TaskBuilder, PoolSelector, etc.).
    *   `style/`: Tailwind CSS entry point.
    *   `utils/`: Frontend helper logic.
    *   `index.ts`: The JupyterLab extension entry point that loads the React Widget.
*   **`airflow_dag_generator/`**: Contains the Backend source code (Python).
    *   `core/`: Business logic (File generation, Git subprocess calls, Pydantic models).
    *   `handlers.py`: Tornado API endpoints exposed to the frontend.
*   **`jupyter-config/`**: JSON configuration to automatically enable the Python backend extension when Jupyter starts.
*   **`style/`**: Contains CSS assets compiled by Tailwind.
*   **`lib/`**: The compiled JavaScript output (generated by build).
*   **`dist/`**: The final packaging output (Python Wheel / Tarball).

## Features

*   **Visual DAG Builder**: Drag-and-drop interface for creating pipeline steps and parallel tasks.
*   **GitOps Workflow**: Built-in "Deployment Cockpit" to handle branching, commits, tags, and merges.
*   **Cluster Integration**: Reads directly from `/home/jovyan/workspaces` to manage projects.
*   **Strict Validation**: Ensures `meta.yaml` and `dag.py` compliance.
*   **Offline Mode**: Zero external dependencies at runtime. No CDNs, no API calls.

## Installation

### Method 1: Installing from Source (Developer)

1.  **Clone the repository**:
    ```bash
    git clone https://github.com/your-org/airflow-dag-generator.git
    cd airflow-dag-generator
    ```

2.  **Install dependencies**:
    ```bash
    # Python dependencies
    pip install -e .

    # Node dependencies (using yarn or npm)
    jlpm install
    ```

3.  **Link the extension**:
    ```bash
    jupyter server extension enable airflow_dag_generator
    jupyter labextension install .
    ```

4.  **Start JupyterLab**:
    ```bash
    jupyter lab
    ```

### Method 2: Offline / Cluster Installation (Production)

For air-gapped clusters, you need to bundle the extension as a Python wheel.

1.  **Build the Wheel**:
    ```bash
    jlpm build:prod
    python setup.py sdist bdist_wheel
    ```

2.  **Install on Cluster**:
    ```bash
    pip install dist/airflow_dag_generator-1.0.0-py3-none-any.whl
    jupyter server extension enable airflow_dag_generator
    ```

## Security & CVE Compliance

*   **No External Calls**: All AI features are disabled.
*   **Pinned Dependencies**: `package.json` uses strict versions.
*   **Sanitization**: `jszip` is pinned to `^3.10.1`.
